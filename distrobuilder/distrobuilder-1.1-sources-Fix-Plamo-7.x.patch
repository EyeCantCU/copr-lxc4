commit 12335bf1a02bf1350144a13bcbfdc7a7eb785c2f
Author: Thomas Hipp <thomas.hipp@canonical.com>
Date:   Fri Sep 4 20:08:01 2020 +0200

    sources: Fix Plamo 7.x
    
    Signed-off-by: Thomas Hipp <thomas.hipp@canonical.com>

diff --git a/sources/plamolinux-http.go b/sources/plamolinux-http.go
index 183ffb0..3dfcac6 100644
--- a/sources/plamolinux-http.go
+++ b/sources/plamolinux-http.go
@@ -66,7 +66,7 @@ func (s *PlamoLinuxHTTP) Run(definition shared.Definition, rootfsDir string) err
 	if release < 7 {
 		pkgTool = "hdsetup"
 	} else {
-		pkgTool = "pkgtools"
+		pkgTool = "pkgtools7"
 	}
 
 	matches, err := filepath.Glob(filepath.Join(pkgDir, fmt.Sprintf("%s-*.txz", pkgTool)))
@@ -102,6 +102,12 @@ export PATH="${PKG_DIR}/sbin:${PATH}"
 export LC_ALL="C"
 export LANG="C"
 
+# Fix name of installer directory
+if [ -d "${PKG_DIR}/sbin/installer_new" ]; then
+    [ -d "${PKG_DIR}/sbin/installer" ] && rm -r "${PKG_DIR}/sbin/installer"
+    mv "${PKG_DIR}/sbin/installer_new" "${PKG_DIR}/sbin/installer"
+fi
+
 # Don't call ldconfig
 sed -i "/ldconfig/!s@/sbin@${PKG_DIR}&@g" ${PKG_DIR}/sbin/installpkg*
 
