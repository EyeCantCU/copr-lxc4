From a3e07f127f39cc01c0e7eba53dc6b85a6027d14b Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?St=C3=A9phane=20Graber?= <stgraber@ubuntu.com>
Date: Fri, 17 Mar 2023 00:48:35 -0400
Subject: [PATCH] lxd/instance/qemu: vmgenid isn't supported on aarch64
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Signed-off-by: St√©phane Graber <stgraber@ubuntu.com>
---
 lxd/instance/drivers/driver_qemu.go | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/lxd/instance/drivers/driver_qemu.go b/lxd/instance/drivers/driver_qemu.go
index ad852b3a6990..57a162ab37ad 100644
--- a/lxd/instance/drivers/driver_qemu.go
+++ b/lxd/instance/drivers/driver_qemu.go
@@ -1302,8 +1302,8 @@ func (d *qemu) start(stateful bool, op *operationlock.InstanceOperation) error {
 		}
 	}
 
-	// VM generation ID is only used on UEFI compatible architectures.
-	if d.architectureSupportsUEFI(d.architecture) {
+	// VM generation ID is only available on x86.
+	if d.architecture == osarch.ARCH_64BIT_INTEL_X86 {
 		qemuCmd = append(qemuCmd, "-device", fmt.Sprintf("vmgenid,guid=%s", d.localConfig["volatile.uuid.generation"]))
 	}
 
