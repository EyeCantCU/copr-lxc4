From 5f4160bb017283ae71539c15b93f2dcd406aac55 Mon Sep 17 00:00:00 2001
From: Thomas Parrott <thomas.parrott@canonical.com>
Date: Wed, 16 Nov 2022 15:52:15 +0000
Subject: [PATCH] lxd/device/disk: Fix attaching cephfs volumes to VMs

Fixes regression caused by 897a481be9738ccc1e3a0ab3c736ed02e4de05f6

Signed-off-by: Thomas Parrott <thomas.parrott@canonical.com>
---
 lxd/device/disk.go | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/lxd/device/disk.go b/lxd/device/disk.go
index 310bb52a6d63..82e56cd196ea 100644
--- a/lxd/device/disk.go
+++ b/lxd/device/disk.go
@@ -728,7 +728,7 @@ func (d *disk) startVM() (*deviceConfig.RunConfig, error) {
 
 				// If the pool is ceph backed, don't mount it, instead pass config to QEMU instance
 				// to use the built in RBD support.
-				if d.pool.Driver().Info().Remote {
+				if d.pool.Driver().Info().Name == "ceph" {
 					config := d.pool.ToAPI().Config
 					poolName := config["ceph.osd.pool_name"]
 
